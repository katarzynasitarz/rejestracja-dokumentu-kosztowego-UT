<template>
<v-container>
     <v-card-text class="headline font-weight-bold" align="center">
         Dodaj kontrahenta
    </v-card-text>

    <v-row width="850" 
            justify="center">
          
        <v-form
        ref="form"
        v-model="valid"
        lazy-validation>

            <v-text-field
            v-model="name"
            :rules="nameRules"
            label="Nazwa firmy"
            required
            ></v-text-field>

            <v-text-field
            v-model="adres"
            :rules="adresRules"
            label="Adres firmy"
            required
            ></v-text-field>

             <v-text-field
            v-model="nip"
            type= "number"
            :rules="nipRules"
            :counter="10"
            label="NIP firmy"
            required
            ></v-text-field>

            <v-text-field
            v-model="email"
            :rules="emailRules"
            label="E-mail firmy"
            required
            ></v-text-field>

            <v-btn
            :disabled="!valid"
            color="dark grey"
            class="mr-4"
            v-on:click="visibility = !visibility"
            dark
            >
            Sprawdź czy istnieje
            </v-btn>

            <v-btn
            color="teal"
            class="mr-4"
            @click="reset"
            dark
            >
            Wyczyść
            </v-btn>

            <v-btn
            color="cyan"
            @click="resetValidation"
            dark
            >
            Zapisz
            </v-btn>

            <v-card-text v-if="visibility">
                <v-text-field
                    v-model="checkName"
                    :rules="nameRules"
                    label="Nazwa firmy"
                    required
                ></v-text-field>

                <v-text-field
                    v-model="checknip"
                    type= "number"
                    :rules="nipRules"
                    :counter="10"
                    label="NIP firmy"
                    required
                ></v-text-field>

                <v-btn
                    color="red lighten-3"
                    class="mr-4"
                    v-on:click="check"
                    dark
                    >Sprawdź w bazie
                </v-btn>
            </v-card-text>
  </v-form>
      </v-row>

  </v-container>
</template>

<script>
export default {
  name: "Contractor",

  data: () => ({
      visibility: false,
      valid: true,
      name: '',
      nameRules: [
        v => !!v || 'Należy wprowadzić nazwę firmy',
      ],
      email: '',
      emailRules: [
        v => !!v || 'Należy wprowadzić e-mail firmy',
        v => /.+@.+\..+/.test(v) || 'Pamiętaj, e-mail ma swoją strukturę',
      ],
      adres: '',
      adresRules: [
      v => !!v || 'Adres firmy jest wymagany',
      ],
      nip: '',
      nipRules: [
        v => !!v || 'Proszę wprowadzić NIP firmy',
        v => (v && v.length == 10) || 'NIP musi zawierać 10 cyfr',
      ],
      checkName: '',
      checknip: '',
  }),

  methods: {
      reset () {
        this.$refs.form.reset()
      },

     
    },

};
</script>
